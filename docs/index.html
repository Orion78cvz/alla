<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css">
    <link rel="icon" href="favicon.ico">
    <title>オーラス条件計算機</title>
    <script src="https://unpkg.com/vue@3.1.5"></script>
</head>
<body>
    <noscript>
        <strong>We're sorry but alla doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>

    <div id="app">
        <h1 class="title">オーラス条件計算(仮)</h1>

        <div id="conf_bonus">
            <h5>ウマ/オカ</h5>
            <p>
                <input class="score" type="number" min="0" step="1000" v-model.number="initial_score" />点持ち
                <input class="score" type="number" min="0" step="1000" v-model.number="origin_score" />点返し
            </p>
            <p>
                ウマ <input class="point" type="number" min="0" step="1" v-model.number="bonus_point_snd" />
                - <input class="point" type="number" min="0" step="1" v-model.number="bonus_point_fst" />
            </p>
        </div>

        <div id="current_status">
            <template v-for="(player, i) in players">
                <div v-bind:class="['player', player_positions[i]]">
                    <p>
                        <span class="name">{{ player.name }}</span>
                        <span class="isleader" v-if="player.isLeader">[親]</span>
                        <span class="isleader" v-else><label>&nbsp;<input type="checkbox" v-model="player.isLeader" v-on:change="onChangeLeader(i)" />&nbsp;</label></span>
                    </p>
                    <p class="score"><input class="score" type="number" min="0" step="100" v-model.number="player.scoreCurrent" />点</p>
                </div>
            </template>

            <div class="pot">
                <table>
                    <tr>
                        <th class="label">積み棒: </th>
                        <td><input class="pot" type="number" min="0" step="1" v-model.number="potStack" /></td>
                        <td>(x300)</td></p>
                    </tr>
                    <tr>
                        <th class="label">リーチ棒: </th>
                        <td><input class="pot" type="number" min="0" step="1" v-model.number="potReach" /></td>
                        <td>(x1000)</td></p>
                    </tr>
                </table>
            </div>

        </div>

        <div id="calc_and_result">
            <h4>計算</h4>
            <p class="error" v-show="error_msg">{{ error_msg }}</p>

            <div class="panel result" v-if="typeof players[0].pointResult !== 'undefined'">
                <p>結果</p>
                <table>
                    <tr v-for="(player, i) in players">
                        <td><span class="name">{{ player.name }}</span></td>
                        <td><span class="point">{{ formatPointResult(player.pointResult) }}</span></td>
                        <td><span class="score">({{ player.scoreResult }})</span></td>
                    </tr>
                </table>
            </div>

            <div class="panel drawn">
                <button @click.prevent="procDrawn">流局</button>
                (全員ノーテンorテンパイ)
            </div>
            <div class="panel tsumo">
                <button @click.prevent="procTsumo">ツモ</button>
                <p v-if="players[0].isLeader">
                    <input class="score" type="number" min="0" step="100" v-model.number="scoreTsumo" /> 点オール
                </p>
                <p v-else>
                    <input class="score" type="number" min="0" step="100" v-model.number="scoreTsumo" /> /
                    <input class="score" type="number" min="0" step="100" v-model.number="scoreTsumoFromLeader" /> 点
                </p>
            </div>
            <div class="panel ron">
                <button @click.prevent="procRon">ロン</button>
                <p>
                    <select v-model.number="playerRonFrom">
                        <option value="1">{{players[1].name}}</option>
                        <option value="2">{{players[2].name}}</option>
                        <option value="3">{{players[3].name}}</option>
                    </select>
                    から
                    <input class="score" type="number" min="0" step="100" v-model.number="scoreRon" />
                    点
                </p>
            </div>

        </div>
    </div>
    <script src="./main.js"></script>
</body>

</html>
